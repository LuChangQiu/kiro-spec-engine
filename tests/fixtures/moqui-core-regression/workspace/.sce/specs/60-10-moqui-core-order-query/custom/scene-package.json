{
  "apiVersion": "sce.scene.package/v0.1",
  "kind": "scene-template",
  "metadata": {
    "group": "sce.scene",
    "name": "erp-order-query-template",
    "version": "0.1.0",
    "summary": "Regression fixture for Moqui core order query template."
  },
  "compatibility": {
    "kse_version": ">=1.24.0",
    "scene_api_version": "sce.scene/v0.2",
    "moqui_model_version": "3.x",
    "adapter_api_version": "v1"
  },
  "capabilities": {
    "provides": [
      "erp-order-query-read",
      "erp-order-fulfillment-workflow",
      "erp-inventory-reserve-adjust"
    ],
    "requires": [
      "binding:http",
      "profile:erp"
    ]
  },
  "capability_contract": {
    "bindings": [
      {
        "ref": "order.query.read",
        "type": "query",
        "intent": "Read order summary",
        "preconditions": [
          "order id provided"
        ],
        "postconditions": [
          "order summary returned"
        ]
      },
      {
        "ref": "order.fulfillment.workflow",
        "type": "workflow",
        "depends_on": "order.query.read",
        "intent": "Coordinate fulfillment tasks",
        "preconditions": [
          "order validated"
        ],
        "postconditions": [
          "fulfillment instructions prepared"
        ]
      }
    ]
  },
  "parameters": [
    {
      "id": "order_id",
      "type": "string",
      "required": true,
      "description": "Order identifier"
    }
  ],
  "artifacts": {
    "entry_scene": "scene.yaml",
    "generates": [
      "scene.yaml",
      "scene-package.json"
    ]
  },
  "governance": {
    "risk_level": "low",
    "approval_required": false,
    "rollback_supported": true
  },
  "ontology_model": {
    "entities": [
      {
        "id": "Order",
        "type": "aggregate"
      },
      {
        "id": "OrderItem",
        "type": "entity"
      },
      {
        "id": "InventoryItem",
        "type": "entity"
      }
    ],
    "relations": [
      {
        "source": "Order",
        "target": "OrderItem",
        "type": "contains"
      },
      {
        "source": "OrderItem",
        "target": "InventoryItem",
        "type": "references"
      }
    ]
  },
  "governance_contract": {
    "business_rules": [
      {
        "id": "BR-order-status-gate",
        "entity_ref": "Order",
        "status": "active",
        "passed": true
      }
    ],
    "decision_logic": [
      {
        "id": "DEC-reserve-strategy",
        "status": "resolved",
        "automated": true
      }
    ]
  }
}
